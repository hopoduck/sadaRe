# 알람 작동 방식

## TODO

## 알람 추가시 설정할 파라미터

-   String user_id
    -   알람을 받을 대상자의 ID
-   int product_num
    -   알람의 기준이 되는 제품 번호
-   int alram_type
    -   알람의 종류, 하위 문서 참조
-   int alram_count
    -   등록된 알람의 개수, 기본값은 1이며, 동일한 타입의 알람이 추가 될 경우 1씩 더해진다.
-   String alram_href
    -   알람을 확인한 뒤 이동하게 할 페이지 주소
-   int alram_read
    -   알람을 확인했는지에 대한 값으로 기본값은 0, 읽지 않았을 경우 0, 읽었을 경우 1

### 알람 타입 :

1. 제품에 댓글 달림

    - 메시지
        - _\${product_name}_ 제품에 _\${alram_count}_ 개 댓글이 달렸습니다
    - 추가되는 경우
        - 내가 쓴 댓글은 제외하고, 내 제품에 달린 댓글 -> 제품을 작성한 사람에게
    - 수정되는 경우
        - 동일한 _\${product_num}_ 과 _\${alram_type}_ 이 있을 경우
            - _\${alram_count}_ 의 값을 1올리고, _\${alram_read}_ 의 값을 0으로 초기화, _\${alram_add_date}_ 를 현재 시각으로 수정한다.

2. 등록한 댓글에 추가 댓글

    - 메시지
        - _\${product_name}_ 제품에 등록한 내 댓글에 추가 댓글이 _\${alram_count}_ 개 달렸습니다.
    - 추가되는 경우
        - 내가 쓴 댓글은 제외하고, 내 댓글에 달린 하위 댓글 -> 상위 댓글을 작성한 사람에게
    - 수정되는 경우
        - 동일한 _\${product_num}_ 과 _\${alram_type}_ 이 있을 경우
            - _\${alram_count}_ 의 값을 1올리고, _\${alram_read}_ 의 값을 0으로 초기화, _\${alram_add_date}_ 를 현재 시각으로 수정한다.

3. 내가 관심한 상품의 예약 취소

    - 메시지
        - _\${product_name}_ 제품이 예약 상태가 취소되었습니다. 어서 구매하세요!
    - 추가되는 경우
        - 관심한 상품이 예약상태에서 취소되었을 때

4. 내가 관심한 상품의 예약상태로 변경

    - 메시지
        - _\${product_name}_ 제품이 예약 상태가 되었습니다.
    - 추가되는 경우
        - 관심한 상품이 예약상태로 변경되었을 때

5. 내가 관심한 상품의 판매완료되었을 때

    - 메시지
        - _\${product_name}_ 제품이 판매되었습니다. 혹시 구매하신 제품이 맞나요?
    - 추가되는 경우
        - 관심한 상품이 판매완료 상태로 변경되었을 때
    - 추가 기능
        - modal을 이용해 직접 구매한 상품이 맞는지 확인하고 맞다면 판매자에게 별점을 주는 페이지로 이동한다.
